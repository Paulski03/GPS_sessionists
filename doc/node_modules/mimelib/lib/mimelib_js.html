<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>mimelib.js - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../../";
  var index_rel_prefix = "../../../";
</script>

<script src="../../../js/jquery.js"></script>
<script src="../../../js/darkfish.js"></script>

<link href="../../../css/fonts.css" rel="stylesheet">
<link href="../../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../../table_of_contents.html#pages">Pages</a>
    <a href="../../../table_of_contents.html#classes">Classes</a>
    <a href="../../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../../README_md.html">README</a>
  
    <li><a href="../../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../../app/assets/config/manifest_js.html">manifest.js</a>
  
    <li><a href="../../../app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../../app/assets/javascripts/cable_js.html">cable.js</a>
  
    <li><a href="../../../app/assets/javascripts/pages_coffee.html">pages.coffee</a>
  
    <li><a href="../../../app/assets/stylesheets/application_css_scss.html">application.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/custom_css_scss.html">custom.css.scss</a>
  
    <li><a href="../../../app/assets/stylesheets/pages_scss.html">pages.scss</a>
  
    <li><a href="../../../config_ru.html">config.ru</a>
  
    <li><a href="../../../log/development_log.html">development.log</a>
  
    <li><a href="../../../node_modules/addressparser/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../node_modules/addressparser/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/addressparser/README_md.html">README</a>
  
    <li><a href="../../../node_modules/addressparser/lib/addressparser_js.html">addressparser.js</a>
  
    <li><a href="../../../node_modules/addressparser/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_ensureasync/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_ensureasync/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_ensureasync/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_queue/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_queue/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_queue/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_util_arrayeach/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_util_arrayeach/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_util_arrayeach/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_util_ensureasync/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_util_ensureasync/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_util_ensureasync/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_util_isarray/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_util_isarray/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_util_isarray/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_util_map/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_util_map/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_util_map/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_util_noop/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_util_noop/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_util_noop/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_util_onlyonce/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_util_onlyonce/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_util_onlyonce/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_util_queue/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_util_queue/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_util_queue/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_util_restparam/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_util_restparam/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_util_restparam/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/async_util_setimmediate/README_md.html">README</a>
  
    <li><a href="../../../node_modules/async_util_setimmediate/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/async_util_setimmediate/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/bottleneck/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/bottleneck/README_md.html">README</a>
  
    <li><a href="../../../node_modules/bottleneck/bottleneck_d_ts_ejs.html">bottleneck.d.ts.ejs</a>
  
    <li><a href="../../../node_modules/bottleneck/bottleneck_js.html">bottleneck.js</a>
  
    <li><a href="../../../node_modules/bottleneck/bottleneck_min_js.html">bottleneck.min.js</a>
  
    <li><a href="../../../node_modules/bottleneck/bower_json.html">bower.json</a>
  
    <li><a href="../../../node_modules/bottleneck/lib/Bottleneck_js.html">Bottleneck.js</a>
  
    <li><a href="../../../node_modules/bottleneck/lib/Cluster_js.html">Cluster.js</a>
  
    <li><a href="../../../node_modules/bottleneck/lib/DLList_js.html">DLList.js</a>
  
    <li><a href="../../../node_modules/bottleneck/lib/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/bottleneck/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/bottleneck/scripts/build_sh.html">build.sh</a>
  
    <li><a href="../../../node_modules/bottleneck/src/Bottleneck_coffee.html">Bottleneck.coffee</a>
  
    <li><a href="../../../node_modules/bottleneck/src/Cluster_coffee.html">Cluster.coffee</a>
  
    <li><a href="../../../node_modules/bottleneck/src/DLList_coffee.html">DLList.coffee</a>
  
    <li><a href="../../../node_modules/bottleneck/src/index_coffee.html">index.coffee</a>
  
    <li><a href="../../../node_modules/bottleneck/test_ts.html">test.ts</a>
  
    <li><a href="../../../node_modules/bottleneck/test/DLList_js.html">DLList.js</a>
  
    <li><a href="../../../node_modules/bottleneck/test/general_js.html">general.js</a>
  
    <li><a href="../../../node_modules/bottleneck/test/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/bottleneck/test/priority_js.html">priority.js</a>
  
    <li><a href="../../../node_modules/bottleneck/test/promises_js.html">promises.js</a>
  
    <li><a href="../../../node_modules/debug/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../node_modules/debug/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/debug/Makefile.html">Makefile</a>
  
    <li><a href="../../../node_modules/debug/README_md.html">README</a>
  
    <li><a href="../../../node_modules/debug/component_json.html">component.json</a>
  
    <li><a href="../../../node_modules/debug/karma_conf_js.html">karma.conf.js</a>
  
    <li><a href="../../../node_modules/debug/node_js.html">node.js</a>
  
    <li><a href="../../../node_modules/debug/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/debug/src/browser_js.html">browser.js</a>
  
    <li><a href="../../../node_modules/debug/src/debug_js.html">debug.js</a>
  
    <li><a href="../../../node_modules/debug/src/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/debug/src/node_js.html">node.js</a>
  
    <li><a href="../../../node_modules/encoding/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/encoding/README_md.html">README</a>
  
    <li><a href="../../../node_modules/encoding/lib/encoding_js.html">encoding.js</a>
  
    <li><a href="../../../node_modules/encoding/lib/iconv-loader_js.html">iconv-loader.js</a>
  
    <li><a href="../../../node_modules/encoding/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/encoding/test/test_js.html">test.js</a>
  
    <li><a href="../../../node_modules/extend/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../node_modules/extend/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/extend/README_md.html">README</a>
  
    <li><a href="../../../node_modules/extend/component_json.html">component.json</a>
  
    <li><a href="../../../node_modules/extend/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/extend/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/Changelog_md.html">Changelog</a>
  
    <li><a href="../../../node_modules/iconv-lite/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/iconv-lite/README_md.html">README</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/dbcs-codec_js.html">dbcs-codec.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/dbcs-data_js.html">dbcs-data.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/internal_js.html">internal.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/sbcs-codec_js.html">sbcs-codec.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/sbcs-data-generated_js.html">sbcs-data-generated.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/sbcs-data_js.html">sbcs-data.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/big5-added_json.html">big5-added.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/cp936_json.html">cp936.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/cp949_json.html">cp949.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/cp950_json.html">cp950.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/eucjp_json.html">eucjp.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/gb18030-ranges_json.html">gb18030-ranges.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/gbk-added_json.html">gbk-added.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/tables/shiftjis_json.html">shiftjis.json</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/utf16_js.html">utf16.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/encodings/utf7_js.html">utf7.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/bom-handling_js.html">bom-handling.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/extend-node_js.html">extend-node.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/index_d_ts.html">index.d.ts</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/lib/streams_js.html">streams.js</a>
  
    <li><a href="../../../node_modules/iconv-lite/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/lodash_chunk/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/lodash_chunk/README_md.html">README</a>
  
    <li><a href="../../../node_modules/lodash_chunk/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/lodash_chunk/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/mailparser/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/mailparser/README_md.html">README</a>
  
    <li><a href="../../../node_modules/mailparser/lib/datetime_js.html">datetime.js</a>
  
    <li><a href="../../../node_modules/mailparser/lib/mailparser_js.html">mailparser.js</a>
  
    <li><a href="../../../node_modules/mailparser/lib/streams_js.html">streams.js</a>
  
    <li><a href="../../../node_modules/mailparser/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/mailparser/test/mailparser_js.html">mailparser.js</a>
  
    <li><a href="../../../node_modules/mailparser/test/mixed_eml.html">mixed.eml</a>
  
    <li><a href="../../../node_modules/mailparser/test/nested_eml.html">nested.eml</a>
  
    <li><a href="../../../node_modules/mime/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/mime/README_md.html">README</a>
  
    <li><a href="../../../node_modules/mime/build/build_js.html">build.js</a>
  
    <li><a href="../../../node_modules/mime/build/test_js.html">test.js</a>
  
    <li><a href="../../../node_modules/mime/cli_js.html">cli.js</a>
  
    <li><a href="../../../node_modules/mime/mime_js.html">mime.js</a>
  
    <li><a href="../../../node_modules/mime/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/mime/types_json.html">types.json</a>
  
    <li><a href="../../../node_modules/mimelib/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/mimelib/README_md.html">README</a>
  
    <li><a href="../../../node_modules/mimelib/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/mimelib/lib/content-types-reversed_js.html">content-types-reversed.js</a>
  
    <li><a href="../../../node_modules/mimelib/lib/content-types_js.html">content-types.js</a>
  
    <li><a href="../../../node_modules/mimelib/lib/mimelib_js.html">mimelib.js</a>
  
    <li><a href="../../../node_modules/mimelib/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/ms/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/ms/license_md.html">license</a>
  
    <li><a href="../../../node_modules/ms/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/ms/readme_md.html">readme</a>
  
    <li><a href="../../../node_modules/sendgrid-rest/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../node_modules/sendgrid-rest/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../node_modules/sendgrid-rest/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../node_modules/sendgrid-rest/README_md.html">README</a>
  
    <li><a href="../../../node_modules/sendgrid-rest/examples/example_js.html">example.js</a>
  
    <li><a href="../../../node_modules/sendgrid-rest/lib/client_js.html">client.js</a>
  
    <li><a href="../../../node_modules/sendgrid-rest/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/sendgrid-rest/test/test_js.html">test.js</a>
  
    <li><a href="../../../node_modules/sendgrid/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../../node_modules/sendgrid/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../../node_modules/sendgrid/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../../node_modules/sendgrid/README_md.html">README</a>
  
    <li><a href="../../../node_modules/sendgrid/TROUBLESHOOTING_md.html">TROUBLESHOOTING</a>
  
    <li><a href="../../../node_modules/sendgrid/USAGE_md.html">USAGE</a>
  
    <li><a href="../../../node_modules/sendgrid/USE_CASES_md.html">USE_CASES</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/accesssettings/accesssettings_js.html">accesssettings.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/alerts/alerts_js.html">alerts.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/apikeys/apikeys_js.html">apikeys.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/asm/asm_js.html">asm.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/browsers/browsers_js.html">browsers.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/campaigns/campaigns_js.html">campaigns.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/categories/categories_js.html">categories.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/clients/clients_js.html">clients.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/contactdb/contactdb_js.html">contactdb.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/devices/devices_js.html">devices.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/geo/geo_js.html">geo.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/helpers/mail/example_js.html">example.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/ips/ips_js.html">ips.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/mail/mail_js.html">mail.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/mailboxproviders/mailboxproviders_js.html">mailboxproviders.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/mailsettings/mailsettings_js.html">mailsettings.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/partnersettings/partnersettings_js.html">partnersettings.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/scopes/scopes_js.html">scopes.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/senders/senders_js.html">senders.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/stats/stats_js.html">stats.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/subusers/subusers_js.html">subusers.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/suppression/suppression_js.html">suppression.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/templates/templates_js.html">templates.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/trackingsettings/trackingsettings_js.html">trackingsettings.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/user/user_js.html">user.js</a>
  
    <li><a href="../../../node_modules/sendgrid/examples/whitelabel/whitelabel_js.html">whitelabel.js</a>
  
    <li><a href="../../../node_modules/sendgrid/index_d_ts.html">index.d.ts</a>
  
    <li><a href="../../../node_modules/sendgrid/index_js.html">index.js</a>
  
    <li><a href="../../../node_modules/sendgrid/lib/helpers/contact-importer/contact-importer_js.html">contact-importer.js</a>
  
    <li><a href="../../../node_modules/sendgrid/lib/helpers/error_js.html">error.js</a>
  
    <li><a href="../../../node_modules/sendgrid/lib/helpers/inbound/parse_js.html">parse.js</a>
  
    <li><a href="../../../node_modules/sendgrid/lib/helpers/mail/README_md.html">README</a>
  
    <li><a href="../../../node_modules/sendgrid/lib/helpers/mail/mail_js.html">mail.js</a>
  
    <li><a href="../../../node_modules/sendgrid/lib/sendgrid_js.html">sendgrid.js</a>
  
    <li><a href="../../../node_modules/sendgrid/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/sendgrid/test/helpers/contact-importer/contact-importer_test_js.html">contact-importer.test.js</a>
  
    <li><a href="../../../node_modules/sendgrid/test/helpers/inbound/parse_test_js.html">parse.test.js</a>
  
    <li><a href="../../../node_modules/sendgrid/test/helpers/mail/test_js.html">test.js</a>
  
    <li><a href="../../../node_modules/sendgrid/test/prism_sh.html">prism.sh</a>
  
    <li><a href="../../../node_modules/sendgrid/test/test_js.html">test.js</a>
  
    <li><a href="../../../node_modules/sendgrid/tsconfig_json.html">tsconfig.json</a>
  
    <li><a href="../../../node_modules/uue/LICENSE.html">LICENSE</a>
  
    <li><a href="../../../node_modules/uue/README_md.html">README</a>
  
    <li><a href="../../../node_modules/uue/package_json.html">package.json</a>
  
    <li><a href="../../../node_modules/uue/uue_js.html">uue.js</a>
  
    <li><a href="../../../package-lock_json.html">package-lock.json</a>
  
    <li><a href="../../../package_json.html">package.json</a>
  
    <li><a href="../../../public/404_html.html">404.html</a>
  
    <li><a href="../../../public/422_html.html">422.html</a>
  
    <li><a href="../../../public/500_html.html">500.html</a>
  
    <li><a href="../../../public/apple-touch-icon-precomposed_png.html">apple-touch-icon-precomposed.png</a>
  
    <li><a href="../../../public/apple-touch-icon_png.html">apple-touch-icon.png</a>
  
    <li><a href="../../../public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../../public/robots_txt.html">robots</a>
  
    <li><a href="../../../tmp/pids/server_pid.html">server.pid</a>
  
    <li><a href="../../../tmp/restart_txt.html">restart</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page node_modules/mimelib/lib/mimelib.js">

<p>“use strict”;</p>

<p>var convert = require(“encoding”).convert,</p>

<pre class="ruby"><span class="ruby-identifier">addressparser</span> = <span class="ruby-identifier">require</span>(<span class="ruby-string">&quot;addressparser&quot;</span>);
</pre>

<p>function replaceAll(str, regex, by) {</p>

<pre>var oldStr = null;
while (oldStr !== str) {
    oldStr = str;
    str = str.replace(regex, by);
}
return str;</pre>

<p>}</p>

<pre>Folds a long line according to the RFC 5322 http://tools.ietf.org/html/rfc5322#section-2.1.1

@param {String} str Mime string that might need folding
@param {Number} [maxLength=76] max length for a line
@param {Boolean} [foldAnywhere] If true, can fold at any location (ie. in base64)
@param {Boolean} [afterSpace] If true fold after the space (default is before)
@return {String} Folded string</pre>

<p>module.exports.foldLine = function(str, maxLength, foldAnywhere,
afterSpace, lineMargin) {</p>

<pre>if (foldAnywhere) {
    return addBase64SoftLinebreaks(str, maxLength || 76);
}
return module.exports.mimeFunctions.foldLine(str, maxLength, !! afterSpace, lineMargin);</pre>

<p>};</p>

<pre> Encodes a string into mime encoded word format http://en.wikipedia.org/wiki/MIME#Encoded-Word

 @param {String} str String to be encoded
 @param {String} encoding Encoding Q for quoted printable or B for base64
 @param {String} [charset=&quot;UTF-8&quot;] Charset to be used
 @param {Number} [maxLength] If set, split on maxLength
 @return {String} Mime word encoded string
/</pre>

<p>module.exports.encodeMimeWord = function(str, encoding, charset, maxLength)
{</p>

<pre>return module.exports.mimeFunctions.encodeMimeWord(str, encoding, maxLength || 0, charset);</pre>

<p>};</p>

<p>/**</p>

<pre> Encodes need parts of a string to mime word format

 @param {String} str String to be encoded
 @param {String} encoding Encoding Q for quoted printable or B for base64
 @param {Number} [maxLength] If set, split on maxLength
 @param {String} [charset=&quot;UTF-8&quot;] Charset to be used
 @return {String} String with possible mime word encoded parts
/</pre>

<p>module.exports.encodeMimeWords = function(str, encoding, maxLength,
charset) {</p>

<pre>return module.exports.mimeFunctions.encodeMimeWords(str, encoding, maxLength || 0, charset);</pre>

<p>};</p>

<p>/**</p>

<pre> Decodes a string from mime encoded word

 @param {String} str Mime word encoded string
 @return {String} Decoded string
/</pre>

<p>module.exports.decodeMimeWord = function(str) {</p>

<pre>return module.exports.mimeFunctions.decodeMimeWord(str).toString(&quot;utf-8&quot;);</pre>

<p>};</p>

<p>/**</p>

<pre> Decodes all mime words from a string to an unencoded string

 @param {String} str String that may include mime words
 @return {String} Unencoded string
/</pre>

<p>module.exports.parseMimeWords = function(str) {</p>

<pre>return module.exports.mimeFunctions.decodeMimeWords(str).toString(&quot;utf-8&quot;);</pre>

<p>};</p>

<p>/**</p>

<pre> Encodes a string into Quoted-printable format. Maximum line length for the
 encoded string is always 76+2 bytes

 @param {String} str String to be encoded into Quoted-printable
 @param {Boolean} [mimeWord] legacy parameter, not used
 @param {String} [charset=&quot;UTF-8&quot;] Destination charset
 @return {String} Quoted printable encoded string
/</pre>

<p>module.exports.encodeQuotedPrintable = function(str, mimeWord, charset) {</p>

<pre>if (typeof mimeWord == &quot;string&quot; &amp;&amp; !charset) {
    charset = mimeWord;
    mimeWord = undefined;
}
return module.exports.mimeFunctions.encodeQuotedPrintable(str, charset);</pre>

<p>};</p>

<p>/**</p>

<pre> Decodes a string from Quoted-printable format

 @param {String} str String to be decoded from Quoted-printable
 @param {Boolean} [mimeWord] legacy parameter, not used
 @param {String} [charset=&quot;UTF-8&quot;] Source charset
 @return {String} Decoded string
/</pre>

<p>module.exports.decodeQuotedPrintable = function(str, mimeWord, charset) {</p>

<pre>if (typeof mimeWord == &quot;string&quot; &amp;&amp; !charset) {
    charset = mimeWord;
    mimeWord = undefined;
}
charset = (charset || &quot;&quot;).toString().toUpperCase().trim();
var decodedString = module.exports.mimeFunctions.decodeQuotedPrintable(str, &quot;utf-8&quot;, charset);
return charset == &quot;BINARY&quot; ? decodedString : decodedString.toString(&quot;utf-8&quot;);</pre>

<p>};</p>

<p>/**</p>

<pre> Encodes a string into Base64 format. Base64 is mime-word safe

 @param {String} str String to be encoded into Base64
 @param {String} [charset=&quot;UTF-8&quot;] Destination charset
 @return {String} Base64 encoded string
/</pre>

<p>module.exports.encodeBase64 = function(str, charset) {</p>

<pre>return module.exports.mimeFunctions.encodeBase64(str, charset);</pre>

<p>};</p>

<p>/**</p>

<pre> Decodes a string from Base64 format

 @param {String} str String to be decoded from Base64
 @param {String} [charset=&quot;UTF-8&quot;] Source charset
 @return {String} Decoded string
/</pre>

<p>module.exports.decodeBase64 = function(str, charset) {</p>

<pre>return module.exports.mimeFunctions.decodeBase64(str, &quot;utf-8&quot;, charset).toString(&quot;utf-8&quot;);</pre>

<p>};</p>

<p>/**</p>

<pre> Parses names and addresses from a from, to, cc or bcc line
 For example: &#39;Andris Reinman &lt;andris@tr.ee&gt;, someone@else.com&#39;
 will be parsed into: [{name:&quot;Andris Reinman&quot;, address:&quot;andris@tr.ee&quot;}, {address: &quot;someone@else.com&quot;}]

 @param {String|Array} addresses Address line string or an array of strings
 @return {Array} An array of parsed e-mails addresses in the form of [{name, address}]
/</pre>

<p>module.exports.parseAddresses = function(addresses) {</p>

<pre>return [].concat.apply([], [].concat(addresses).map(addressparser)).map(function(address) {
    address.name = module.exports.parseMimeWords(address.name);
    if (address.group) {
        address.group.forEach(function(groupAddress) {
            groupAddress.name = module.exports.parseMimeWords(groupAddress.name);
        });
    }
    return address;
});</pre>

<p>};</p>

<p>/**</p>

<pre> Parses header lines into an array of objects. Output: {&#39;x-header&#39;: [&#39;value&#39;]}

 @param {String} headers Full header part to be parsed
 @return {Object} Parsed headers
/</pre>

<p>module.exports.parseHeaders = function(headers) {</p>

<pre>return module.exports.mimeFunctions.parseHeaderLines(headers);</pre>

<p>};</p>

<p>/**</p>

<pre> Parses a header line to search for additional parameters. For example
     parseHeaderLine(&#39;text/plain; charset=utf-8&#39;)
 will be parsed into
     {defaultValue: &#39;text/plain&#39;, charset: &#39;utf-8&#39;}

 @param {String} line Single header value without key part to be parsed
 @return {Object} Parsed value
/</pre>

<p>module.exports.parseHeaderLine = function(line) {</p>

<pre>if (!line) {
    return {};
}

var result = {}, parts = line.split(&quot;;&quot;),
    pos;

for (var i = 0, len = parts.length; i &lt; len; i++) {
    pos = parts[i].indexOf(&quot;=&quot;);
    if (pos &lt; 0) {
        result[!i ? &quot;defaultValue&quot; : &quot;i-&quot; + i] = parts[i].trim();
    } else {
        result[parts[i].substr(0, pos).trim().toLowerCase()] = parts[i].substr(pos + 1).trim();
    }
}
return result;</pre>

<p>};</p>

<p>module.exports.mimeFunctions = {</p>

<pre>mimeEncode: function(str, toCharset, fromCharset) {
    toCharset = toCharset || &quot;UTF-8&quot;;
    fromCharset = fromCharset || &quot;UTF-8&quot;;

    var buffer = convert(str || &quot;&quot;, toCharset, fromCharset),
        ranges = [
            [0x09],
            [0x0A],
            [0x0D],
            [0x20],
            [0x21],
            [0x23, 0x3C],
            [0x3E],
            [0x40, 0x5E],
            [0x60, 0x7E]
        ],
        result = &quot;&quot;;

    for (var i = 0, len = buffer.length; i &lt; len; i++) {
        if (checkRanges(buffer[i], ranges)) {
            result += String.fromCharCode(buffer[i]);
            continue;
        }
        result += &quot;=&quot; + (buffer[i] &lt; 0x10 ? &quot;0&quot; : &quot;&quot;) + buffer[i].toString(16).toUpperCase();
    }

    return result;
},

mimeDecode: function(str, toCharset, fromCharset) {
    str = (str || &quot;&quot;).toString();
    toCharset = toCharset || &quot;UTF-8&quot;;
    fromCharset = fromCharset || &quot;UTF-8&quot;;

    var encodedBytesCount = (str.match(/\=[\da-fA-F]{2}/g) || []).length,
        bufferLength = str.length - encodedBytesCount * 2,
        chr, hex,
        buffer = new Buffer(bufferLength),
        bufferPos = 0;

    for (var i = 0, len = str.length; i &lt; len; i++) {
        chr = str.charAt(i);
        if (chr == &quot;=&quot; &amp;&amp; (hex = str.substr(i + 1, 2)) &amp;&amp; /[\da-fA-F]{2}/.test(hex)) {
            buffer[bufferPos++] = parseInt(hex, 16);
            i += 2;
            continue;
        }
        buffer[bufferPos++] = chr.charCodeAt(0);
    }

    if (fromCharset.toUpperCase().trim() == &quot;BINARY&quot;) {
        return buffer;
    }
    return convert(buffer, toCharset, fromCharset);
},

encodeBase64: function(str, toCharset, fromCharset) {
    var buffer = convert(str || &quot;&quot;, toCharset, fromCharset);
    return addSoftLinebreaks(buffer.toString(&quot;base64&quot;), &quot;base64&quot;);
},

decodeBase64: function(str, toCharset, fromCharset) {
    var buffer = new Buffer((str || &quot;&quot;).toString(), &quot;base64&quot;);
    return convert(buffer, toCharset, fromCharset);
},

decodeQuotedPrintable: function(str, toCharset, fromCharset) {
    str = (str || &quot;&quot;).toString();
    str = str.replace(/\=(?:\r?\n|$)/g, &quot;&quot;);
    return this.mimeDecode(str, toCharset, fromCharset);
},

encodeQuotedPrintable: function(str, toCharset, fromCharset) {
    var mimeEncodedStr = this.mimeEncode(str, toCharset, fromCharset);

    // fix line breaks
    mimeEncodedStr = mimeEncodedStr.replace(/\r?\n|\r/g, function() {
        return &quot;\r\n&quot;;
    }).replace(/[\t ]+$/gm, function(spaces) {
        return spaces.replace(/ /g, &quot;=20&quot;).replace(/\t/g, &quot;=09&quot;);
    });

    return addSoftLinebreaks(mimeEncodedStr, &quot;qp&quot;);
},

encodeMimeWord: function(str, encoding, maxLength, toCharset, fromCharset) {
    toCharset = (toCharset || &quot;utf-8&quot;).toString().toUpperCase().trim();
    encoding = (encoding || &quot;Q&quot;).toString().toUpperCase().trim().charAt(0);
    var encodedStr;

    if (maxLength &amp;&amp; maxLength &gt; 7 + toCharset.length) {
        maxLength -= (7 + toCharset.length);
    }

    if (encoding == &quot;Q&quot;) {
        encodedStr = this.mimeEncode(str, toCharset, fromCharset);
        encodedStr = encodedStr.replace(/[\r\n\t_]/g, function(chr) {
            var code = chr.charCodeAt(0);
            return &quot;=&quot; + (code &lt; 0x10 ? &quot;0&quot; : &quot;&quot;) + code.toString(16).toUpperCase();
        }).replace(/\s/g, &quot;_&quot;);
    } else if (encoding == &quot;B&quot;) {
        encodedStr = convert(str || &quot;&quot;, toCharset, fromCharset).toString(&quot;base64&quot;).trim();
    }

    if (maxLength &amp;&amp; encodedStr.length &gt; maxLength) {
        if (encoding == &quot;Q&quot;) {
            encodedStr = this.splitEncodedString(encodedStr, maxLength).join(&quot;?= =?&quot; + toCharset + &quot;?&quot; + encoding + &quot;?&quot;);
        } else {
            encodedStr = encodedStr.replace(new RegExp(&quot;.{&quot; + maxLength + &quot;}&quot;, &quot;g&quot;), &quot;$&amp;?= =?&quot; + toCharset + &quot;?&quot; + encoding + &quot;?&quot;);
            if (encodedStr.substr(-(&quot; =?&quot; + toCharset + &quot;?&quot; + encoding + &quot;?=&quot;).length) == &quot; =?&quot; + toCharset + &quot;?&quot; + encoding + &quot;?=&quot;) {
                encodedStr = encodedStr.substr(0, encodedStr.length - (&quot; =?&quot; + toCharset + &quot;?&quot; + encoding + &quot;?=&quot;).length);
            }
            if (encodedStr.substr(-(&quot; =?&quot; + toCharset + &quot;?&quot; + encoding + &quot;?&quot;).length) == &quot; =?&quot; + toCharset + &quot;?&quot; + encoding + &quot;?&quot;) {
                encodedStr = encodedStr.substr(0, encodedStr.length - (&quot; =?&quot; + toCharset + &quot;?&quot; + encoding + &quot;?&quot;).length);
            }
        }
    }

    return &quot;=?&quot; + toCharset + &quot;?&quot; + encoding + &quot;?&quot; + encodedStr + (encodedStr.substr(-2) == &quot;?=&quot; ? &quot;&quot; : &quot;?=&quot;);
},

decodeMimeWord: function(str, toCharset) {
    str = (str || &quot;&quot;).toString().trim();

    var fromCharset, encoding, match;

    match = str.match(/^\=\?([\w_\-]+)\?([QqBb])\?([^\?]*)\?\=$/i);
    if (!match) {
        return convert(str, toCharset);
    }

    fromCharset = match[1];
    encoding = (match[2] || &quot;Q&quot;).toString().toUpperCase();
    str = (match[3] || &quot;&quot;).replace(/_/g, &quot; &quot;);

    if (encoding == &quot;B&quot;) {
        return this.decodeBase64(str, toCharset, fromCharset);
    } else if (encoding == &quot;Q&quot;) {
        return this.mimeDecode(str, toCharset, fromCharset);
    } else {
        return str;
    }

},

decodeMimeWords: function(str, toCharset) {
    var curCharset;
    str = (str || &quot;&quot;).toString();
    var v1;
    while (1)
    {
        // join quoted-printable mimeWords
        v1 = str.replace(/(=\?[^?]+\?[Qq]\?)([^?]*)\?=\s*\1([^?]*\?=)/g, &#39;$1$2$3&#39;);
        if (v1 === str)
            break;
        str = v1;
    }

    var joinBRegex = /(=\?[^?]+\?[Bb]\?)([^?]+)\?=\s*\1([^?]+)\?=/g;
    str = replaceAll(str, joinBRegex, function(match, header, part1, part2) {
        var result = Buffer.concat([new Buffer(part1, &#39;base64&#39;), new Buffer(part2, &#39;base64&#39;)]).toString(&#39;base64&#39;);
        return header + result + &#39;?=&#39;;
    });

    str = str.replace(/\=\?([\w_\-]+)\?([QqBb])\?[^\?]*\?\=/g, (function(mimeWord, charset, encoding) {
        curCharset = charset + encoding;
        return this.decodeMimeWord(mimeWord.replace(/\s+/g, &#39;&#39;));
    }).bind(this));

    return convert(str, toCharset);
},

foldLine: function(str, lineLengthMax, afterSpace, lineMargin) {
    lineLengthMax = lineLengthMax || 76;
    lineMargin = lineMargin || Math.floor(lineLengthMax / 5);
    str = (str || &quot;&quot;).toString().trim();

    var pos = 0,
        len = str.length,
        result = &quot;&quot;,
        line, match;

    while (pos &lt; len) {
        line = str.substr(pos, lineLengthMax);
        if (line.length &lt; lineLengthMax) {
            result += line;
            break;
        }
        if ((match = line.match(/^[^\n\r]*(\r?\n|\r)/))) {
            line = match[0];
            result += line;
            pos += line.length;
            continue;
        } else if ((match = line.substr(-lineMargin).match(/(\s+)[^\s]*$/))) {
            line = line.substr(0, line.length - (match[0].length - ( !! afterSpace ? (match[1] || &quot;&quot;).length : 0)));
        } else if ((match = str.substr(pos + line.length).match(/^[^\s]+(\s*)/))) {
            line = line + match[0].substr(0, match[0].length - (!afterSpace ? (match[1] || &quot;&quot;).length : 0));
        }
        result += line;
        pos += line.length;
        if (pos &lt; len) {
            result += &quot;\r\n&quot;;
        }
    }

    return result;
},

encodeMimeWords: function(value, encoding, maxLength, toCharset, fromCharset) {
    var decodedValue = convert((value || &quot;&quot;), &quot;utf-8&quot;, fromCharset).toString(&quot;utf-8&quot;),
        encodedValue;

    encodedValue = decodedValue.replace(/([^\s\u0080-\uFFFF]*[\u0080-\uFFFF]+[^\s\u0080-\uFFFF]*(?:\s+[^\s\u0080-\uFFFF]*[\u0080-\uFFFF]+[^\s\u0080-\uFFFF]*\s*)?)+(?=\s|$)/g, (function(str) {
        return str.length ? this.encodeMimeWord(str, encoding || &quot;Q&quot;, maxLength, toCharset) : &quot;&quot;;
    }).bind(this));

    return encodedValue;
},

encodeHeaderLine: function(key, value, toCharset, fromCharset) {
    var encodedValue = this.encodeMimeWords(value, 52, toCharset, fromCharset);
    return this.foldLine(key + &quot;: &quot; + encodedValue, 76);
},

parseHeaderLines: function(headers, toCharset) {
    var lines = headers.split(/\r?\n|\r/),
        headersObj = {},
        key, value,
        header,
        i, len;

    for (i = lines.length - 1; i &gt;= 0; i--) {
        if (i &amp;&amp; lines[i].match(/^\s/)) {
            lines[i - 1] += &quot;\r\n&quot; + lines[i];
            lines.splice(i, 1);
        }
    }

    for (i = 0, len = lines.length; i &lt; len; i++) {
        header = this.decodeHeaderLine(lines[i]);
        key = (header[0] || &quot;&quot;).toString().toLowerCase().trim();
        value = header[1] || &quot;&quot;;
        if (!toCharset || (toCharset || &quot;&quot;).toString().trim().match(/^utf[\-_]?8$/i)) {
            value = value.toString(&quot;utf-8&quot;);
        }
        if (!headersObj[key]) {
            headersObj[key] = [value];
        } else {
            headersObj[key].push(value);
        }
    }

    return headersObj;
},

decodeHeaderLine: function(header, toCharset) {
    var line = (header || &quot;&quot;).toString().replace(/(?:\r?\n|\r)[ \t]  g, &quot; &quot;).trim(),
        match = line.match(/^\s*([^:]+):(.*)$/),
        key = (match &amp;&amp; match[1] || &quot;&quot;).trim(),
        value = (match &amp;&amp; match[2] || &quot;&quot;).trim();

    value = this.decodeMimeWords(value, toCharset);
    return [key, value];
},

splitEncodedString: function(str, maxlen) {
    var curLine, match, chr, done,
        lines = [];

    while (str.length) {
        curLine = str.substr(0, maxlen);

        // move incomplete escaped char back to main
        if ((match = curLine.match(/\=[0-9A-F]?$/i))) {
            curLine = curLine.substr(0, match.index);
        }

        done = false;
        while (!done) {
            done = true;
            // check if not middle of a unicode char sequence
            if ((match = str.substr(curLine.length).match(/^\=([0-9A-F]{2})/i))) {
                chr = parseInt(match[1], 16);
                // invalid sequence, move one char back anc recheck
                if (chr &lt; 0xC2 &amp;&amp; chr &gt; 0x7F) {
                    curLine = curLine.substr(0, curLine.length - 3);
                    done = false;
                }
            }
        }

        if (curLine.length) {
            lines.push(curLine);
        }
        str = str.substr(curLine.length);
    }

    return lines;
},

parseAddresses: addressparser</pre>

<p>};</p>

<p>// Lines can&#39;t be longer that 76 + &lt;CR&gt;&lt;LF&gt; = 78 bytes //
<a
href="http://tools.ietf.org/html/rfc2045#section-6.7">tools.ietf.org/html/rfc2045#section-6.7</a>
function addSoftLinebreaks(str, encoding) {</p>

<pre>var lineLengthMax = 76;

encoding = (encoding || &quot;base64&quot;).toString().toLowerCase().trim();

if (encoding == &quot;qp&quot;) {
    return addQPSoftLinebreaks(str, lineLengthMax);
} else {
    return addBase64SoftLinebreaks(str, lineLengthMax);
}</pre>

<p>}</p>

<p>function addBase64SoftLinebreaks(base64EncodedStr, lineLengthMax) {</p>

<pre class="ruby"><span class="ruby-identifier">base64EncodedStr</span> = (<span class="ruby-identifier">base64EncodedStr</span> <span class="ruby-operator">||</span> <span class="ruby-string">&quot;&quot;</span>).<span class="ruby-identifier">toString</span>().<span class="ruby-identifier">trim</span>();
<span class="ruby-keyword">return</span> <span class="ruby-identifier">base64EncodedStr</span>.<span class="ruby-identifier">replace</span>(<span class="ruby-identifier">new</span> <span class="ruby-constant">RegExp</span>(<span class="ruby-string">&quot;.{&quot;</span> <span class="ruby-operator">+</span> <span class="ruby-identifier">lineLengthMax</span> <span class="ruby-operator">+</span> <span class="ruby-string">&quot;}&quot;</span>, <span class="ruby-string">&quot;g&quot;</span>), <span class="ruby-string">&quot;$&amp;\r\n&quot;</span>).<span class="ruby-identifier">trim</span>();
</pre>

<p>}</p>

<p>function addQPSoftLinebreaks(mimeEncodedStr, lineLengthMax) {</p>

<pre>var pos = 0,
    len = mimeEncodedStr.length,
    match, code, line,
    lineMargin = Math.floor(lineLengthMax / 3),
    result = &quot;&quot;;

// insert soft linebreaks where needed
while (pos &lt; len) {
    line = mimeEncodedStr.substr(pos, lineLengthMax);
    if ((match = line.match(/\r\n/))) {
        line = line.substr(0, match.index + match[0].length);
        result += line;
        pos += line.length;
        continue;
    }

    if (line.substr(-1) == &quot;\n&quot;) {
        // nothing to change here
        result += line;
        pos += line.length;
        continue;
    } else if ((match = line.substr(-lineMargin).match(/\n.*?$/))) {
        // truncate to nearest line break
        line = line.substr(0, line.length - (match[0].length - 1));
        result += line;
        pos += line.length;
        continue;
    } else if (line.length &gt; lineLengthMax - lineMargin &amp;&amp; (match = line.substr(-lineMargin).match(/[ \t\.,!\?][^ \t\.,!\?]*$/))) {
        // truncate to nearest space
        line = line.substr(0, line.length - (match[0].length - 1));
    } else if (line.substr(-1) == &quot;\r&quot;) {
        line = line.substr(0, line.length - 1);
    } else {
        if (line.match(/\=[\da-f]{0,2}$/i)) {

            // push incomplete encoding sequences to the next line
            if ((match = line.match(/\=[\da-f]{0,1}$/i))) {
                line = line.substr(0, line.length - match[0].length);
            }

            // ensure that utf-8 sequences are not split
            while (line.length &gt; 3 &amp;&amp; line.length &lt; len - pos &amp;&amp; !line.match(/^(?:=[\da-f]{2}){1,4}$/i) &amp;&amp; (match = line.match(/\=[\da-f]{2}$/ig))) {
                code = parseInt(match[0].substr(1, 2), 16);
                if (code &lt; 128) {
                    break;
                }

                line = line.substr(0, line.length - 3);

                if (code &gt;= 0xC0) {
                    break;
                }
            }

        }
    }

    if (pos + line.length &lt; len &amp;&amp; line.substr(-1) != &quot;\n&quot;) {
        if (line.length == 76 &amp;&amp; line.match(/\=[\da-f]{2}$/i)) {
            line = line.substr(0, line.length - 3);
        } else if (line.length == 76) {
            line = line.substr(0, line.length - 1);
        }
        pos += line.length;
        line += &quot;=\r\n&quot;;
    } else {
        pos += line.length;
    }

    result += line;
}

return result;</pre>

<p>}</p>

<p>function checkRanges(nr, ranges) {</p>

<pre>for (var i = ranges.length - 1; i &gt;= 0; i--) {
    if (!ranges[i].length) {
        continue;
    }
    if (ranges[i].length == 1 &amp;&amp; nr == ranges[i][0]) {
        return true;
    }
    if (ranges[i].length == 2 &amp;&amp; nr &gt;= ranges[i][0] &amp;&amp; nr &lt;= ranges[i][1]) {
        return true;
    }
}
return false;</pre>

<p>}</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

