<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>bottleneck.js - RDoc Documentation</title>

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
  var index_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/darkfish.js"></script>

<link href="../../css/fonts.css" rel="stylesheet">
<link href="../../css/rdoc.css" rel="stylesheet">



<body id="top" role="document" class="file">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  

  <div id="project-metadata">
    <div id="fileindex-section" class="nav-section">
  <h3>Pages</h3>

  <ul class="link-list">
  
    <li><a href="../../Gemfile.html">Gemfile</a>
  
    <li><a href="../../Gemfile_lock.html">Gemfile.lock</a>
  
    <li><a href="../../README_md.html">README</a>
  
    <li><a href="../../Rakefile.html">Rakefile</a>
  
    <li><a href="../../app/assets/config/manifest_js.html">manifest.js</a>
  
    <li><a href="../../app/assets/javascripts/application_js.html">application.js</a>
  
    <li><a href="../../app/assets/javascripts/cable_js.html">cable.js</a>
  
    <li><a href="../../app/assets/javascripts/pages_coffee.html">pages.coffee</a>
  
    <li><a href="../../app/assets/stylesheets/application_css_scss.html">application.css.scss</a>
  
    <li><a href="../../app/assets/stylesheets/custom_css_scss.html">custom.css.scss</a>
  
    <li><a href="../../app/assets/stylesheets/pages_scss.html">pages.scss</a>
  
    <li><a href="../../config_ru.html">config.ru</a>
  
    <li><a href="../../log/development_log.html">development.log</a>
  
    <li><a href="../../node_modules/addressparser/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../node_modules/addressparser/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/addressparser/README_md.html">README</a>
  
    <li><a href="../../node_modules/addressparser/lib/addressparser_js.html">addressparser.js</a>
  
    <li><a href="../../node_modules/addressparser/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_ensureasync/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_ensureasync/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_ensureasync/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_queue/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_queue/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_queue/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_util_arrayeach/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_util_arrayeach/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_util_arrayeach/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_util_ensureasync/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_util_ensureasync/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_util_ensureasync/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_util_isarray/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_util_isarray/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_util_isarray/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_util_map/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_util_map/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_util_map/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_util_noop/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_util_noop/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_util_noop/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_util_onlyonce/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_util_onlyonce/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_util_onlyonce/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_util_queue/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_util_queue/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_util_queue/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_util_restparam/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_util_restparam/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_util_restparam/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/async_util_setimmediate/README_md.html">README</a>
  
    <li><a href="../../node_modules/async_util_setimmediate/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/async_util_setimmediate/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/bottleneck/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/bottleneck/README_md.html">README</a>
  
    <li><a href="../../node_modules/bottleneck/bottleneck_d_ts_ejs.html">bottleneck.d.ts.ejs</a>
  
    <li><a href="../../node_modules/bottleneck/bottleneck_js.html">bottleneck.js</a>
  
    <li><a href="../../node_modules/bottleneck/bottleneck_min_js.html">bottleneck.min.js</a>
  
    <li><a href="../../node_modules/bottleneck/bower_json.html">bower.json</a>
  
    <li><a href="../../node_modules/bottleneck/lib/Bottleneck_js.html">Bottleneck.js</a>
  
    <li><a href="../../node_modules/bottleneck/lib/Cluster_js.html">Cluster.js</a>
  
    <li><a href="../../node_modules/bottleneck/lib/DLList_js.html">DLList.js</a>
  
    <li><a href="../../node_modules/bottleneck/lib/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/bottleneck/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/bottleneck/scripts/build_sh.html">build.sh</a>
  
    <li><a href="../../node_modules/bottleneck/src/Bottleneck_coffee.html">Bottleneck.coffee</a>
  
    <li><a href="../../node_modules/bottleneck/src/Cluster_coffee.html">Cluster.coffee</a>
  
    <li><a href="../../node_modules/bottleneck/src/DLList_coffee.html">DLList.coffee</a>
  
    <li><a href="../../node_modules/bottleneck/src/index_coffee.html">index.coffee</a>
  
    <li><a href="../../node_modules/bottleneck/test_ts.html">test.ts</a>
  
    <li><a href="../../node_modules/bottleneck/test/DLList_js.html">DLList.js</a>
  
    <li><a href="../../node_modules/bottleneck/test/general_js.html">general.js</a>
  
    <li><a href="../../node_modules/bottleneck/test/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/bottleneck/test/priority_js.html">priority.js</a>
  
    <li><a href="../../node_modules/bottleneck/test/promises_js.html">promises.js</a>
  
    <li><a href="../../node_modules/debug/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../node_modules/debug/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/debug/Makefile.html">Makefile</a>
  
    <li><a href="../../node_modules/debug/README_md.html">README</a>
  
    <li><a href="../../node_modules/debug/component_json.html">component.json</a>
  
    <li><a href="../../node_modules/debug/karma_conf_js.html">karma.conf.js</a>
  
    <li><a href="../../node_modules/debug/node_js.html">node.js</a>
  
    <li><a href="../../node_modules/debug/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/debug/src/browser_js.html">browser.js</a>
  
    <li><a href="../../node_modules/debug/src/debug_js.html">debug.js</a>
  
    <li><a href="../../node_modules/debug/src/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/debug/src/node_js.html">node.js</a>
  
    <li><a href="../../node_modules/encoding/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/encoding/README_md.html">README</a>
  
    <li><a href="../../node_modules/encoding/lib/encoding_js.html">encoding.js</a>
  
    <li><a href="../../node_modules/encoding/lib/iconv-loader_js.html">iconv-loader.js</a>
  
    <li><a href="../../node_modules/encoding/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/encoding/test/test_js.html">test.js</a>
  
    <li><a href="../../node_modules/extend/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../node_modules/extend/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/extend/README_md.html">README</a>
  
    <li><a href="../../node_modules/extend/component_json.html">component.json</a>
  
    <li><a href="../../node_modules/extend/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/extend/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/iconv-lite/Changelog_md.html">Changelog</a>
  
    <li><a href="../../node_modules/iconv-lite/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/iconv-lite/README_md.html">README</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/dbcs-codec_js.html">dbcs-codec.js</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/dbcs-data_js.html">dbcs-data.js</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/internal_js.html">internal.js</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/sbcs-codec_js.html">sbcs-codec.js</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/sbcs-data-generated_js.html">sbcs-data-generated.js</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/sbcs-data_js.html">sbcs-data.js</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/tables/big5-added_json.html">big5-added.json</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/tables/cp936_json.html">cp936.json</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/tables/cp949_json.html">cp949.json</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/tables/cp950_json.html">cp950.json</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/tables/eucjp_json.html">eucjp.json</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/tables/gb18030-ranges_json.html">gb18030-ranges.json</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/tables/gbk-added_json.html">gbk-added.json</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/tables/shiftjis_json.html">shiftjis.json</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/utf16_js.html">utf16.js</a>
  
    <li><a href="../../node_modules/iconv-lite/encodings/utf7_js.html">utf7.js</a>
  
    <li><a href="../../node_modules/iconv-lite/lib/bom-handling_js.html">bom-handling.js</a>
  
    <li><a href="../../node_modules/iconv-lite/lib/extend-node_js.html">extend-node.js</a>
  
    <li><a href="../../node_modules/iconv-lite/lib/index_d_ts.html">index.d.ts</a>
  
    <li><a href="../../node_modules/iconv-lite/lib/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/iconv-lite/lib/streams_js.html">streams.js</a>
  
    <li><a href="../../node_modules/iconv-lite/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/lodash_chunk/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/lodash_chunk/README_md.html">README</a>
  
    <li><a href="../../node_modules/lodash_chunk/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/lodash_chunk/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/mailparser/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/mailparser/README_md.html">README</a>
  
    <li><a href="../../node_modules/mailparser/lib/datetime_js.html">datetime.js</a>
  
    <li><a href="../../node_modules/mailparser/lib/mailparser_js.html">mailparser.js</a>
  
    <li><a href="../../node_modules/mailparser/lib/streams_js.html">streams.js</a>
  
    <li><a href="../../node_modules/mailparser/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/mailparser/test/mailparser_js.html">mailparser.js</a>
  
    <li><a href="../../node_modules/mailparser/test/mixed_eml.html">mixed.eml</a>
  
    <li><a href="../../node_modules/mailparser/test/nested_eml.html">nested.eml</a>
  
    <li><a href="../../node_modules/mime/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/mime/README_md.html">README</a>
  
    <li><a href="../../node_modules/mime/build/build_js.html">build.js</a>
  
    <li><a href="../../node_modules/mime/build/test_js.html">test.js</a>
  
    <li><a href="../../node_modules/mime/cli_js.html">cli.js</a>
  
    <li><a href="../../node_modules/mime/mime_js.html">mime.js</a>
  
    <li><a href="../../node_modules/mime/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/mime/types_json.html">types.json</a>
  
    <li><a href="../../node_modules/mimelib/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/mimelib/README_md.html">README</a>
  
    <li><a href="../../node_modules/mimelib/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/mimelib/lib/content-types-reversed_js.html">content-types-reversed.js</a>
  
    <li><a href="../../node_modules/mimelib/lib/content-types_js.html">content-types.js</a>
  
    <li><a href="../../node_modules/mimelib/lib/mimelib_js.html">mimelib.js</a>
  
    <li><a href="../../node_modules/mimelib/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/ms/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/ms/license_md.html">license</a>
  
    <li><a href="../../node_modules/ms/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/ms/readme_md.html">readme</a>
  
    <li><a href="../../node_modules/sendgrid-rest/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../node_modules/sendgrid-rest/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../node_modules/sendgrid-rest/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../node_modules/sendgrid-rest/README_md.html">README</a>
  
    <li><a href="../../node_modules/sendgrid-rest/examples/example_js.html">example.js</a>
  
    <li><a href="../../node_modules/sendgrid-rest/lib/client_js.html">client.js</a>
  
    <li><a href="../../node_modules/sendgrid-rest/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/sendgrid-rest/test/test_js.html">test.js</a>
  
    <li><a href="../../node_modules/sendgrid/CHANGELOG_md.html">CHANGELOG</a>
  
    <li><a href="../../node_modules/sendgrid/CONTRIBUTING_md.html">CONTRIBUTING</a>
  
    <li><a href="../../node_modules/sendgrid/LICENSE_txt.html">LICENSE</a>
  
    <li><a href="../../node_modules/sendgrid/README_md.html">README</a>
  
    <li><a href="../../node_modules/sendgrid/TROUBLESHOOTING_md.html">TROUBLESHOOTING</a>
  
    <li><a href="../../node_modules/sendgrid/USAGE_md.html">USAGE</a>
  
    <li><a href="../../node_modules/sendgrid/USE_CASES_md.html">USE_CASES</a>
  
    <li><a href="../../node_modules/sendgrid/examples/accesssettings/accesssettings_js.html">accesssettings.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/alerts/alerts_js.html">alerts.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/apikeys/apikeys_js.html">apikeys.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/asm/asm_js.html">asm.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/browsers/browsers_js.html">browsers.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/campaigns/campaigns_js.html">campaigns.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/categories/categories_js.html">categories.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/clients/clients_js.html">clients.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/contactdb/contactdb_js.html">contactdb.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/devices/devices_js.html">devices.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/geo/geo_js.html">geo.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/helpers/mail/example_js.html">example.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/ips/ips_js.html">ips.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/mail/mail_js.html">mail.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/mailboxproviders/mailboxproviders_js.html">mailboxproviders.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/mailsettings/mailsettings_js.html">mailsettings.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/partnersettings/partnersettings_js.html">partnersettings.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/scopes/scopes_js.html">scopes.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/senders/senders_js.html">senders.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/stats/stats_js.html">stats.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/subusers/subusers_js.html">subusers.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/suppression/suppression_js.html">suppression.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/templates/templates_js.html">templates.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/trackingsettings/trackingsettings_js.html">trackingsettings.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/user/user_js.html">user.js</a>
  
    <li><a href="../../node_modules/sendgrid/examples/whitelabel/whitelabel_js.html">whitelabel.js</a>
  
    <li><a href="../../node_modules/sendgrid/index_d_ts.html">index.d.ts</a>
  
    <li><a href="../../node_modules/sendgrid/index_js.html">index.js</a>
  
    <li><a href="../../node_modules/sendgrid/lib/helpers/contact-importer/contact-importer_js.html">contact-importer.js</a>
  
    <li><a href="../../node_modules/sendgrid/lib/helpers/error_js.html">error.js</a>
  
    <li><a href="../../node_modules/sendgrid/lib/helpers/inbound/parse_js.html">parse.js</a>
  
    <li><a href="../../node_modules/sendgrid/lib/helpers/mail/README_md.html">README</a>
  
    <li><a href="../../node_modules/sendgrid/lib/helpers/mail/mail_js.html">mail.js</a>
  
    <li><a href="../../node_modules/sendgrid/lib/sendgrid_js.html">sendgrid.js</a>
  
    <li><a href="../../node_modules/sendgrid/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/sendgrid/test/helpers/contact-importer/contact-importer_test_js.html">contact-importer.test.js</a>
  
    <li><a href="../../node_modules/sendgrid/test/helpers/inbound/parse_test_js.html">parse.test.js</a>
  
    <li><a href="../../node_modules/sendgrid/test/helpers/mail/test_js.html">test.js</a>
  
    <li><a href="../../node_modules/sendgrid/test/prism_sh.html">prism.sh</a>
  
    <li><a href="../../node_modules/sendgrid/test/test_js.html">test.js</a>
  
    <li><a href="../../node_modules/sendgrid/tsconfig_json.html">tsconfig.json</a>
  
    <li><a href="../../node_modules/uue/LICENSE.html">LICENSE</a>
  
    <li><a href="../../node_modules/uue/README_md.html">README</a>
  
    <li><a href="../../node_modules/uue/package_json.html">package.json</a>
  
    <li><a href="../../node_modules/uue/uue_js.html">uue.js</a>
  
    <li><a href="../../package-lock_json.html">package-lock.json</a>
  
    <li><a href="../../package_json.html">package.json</a>
  
    <li><a href="../../public/404_html.html">404.html</a>
  
    <li><a href="../../public/422_html.html">422.html</a>
  
    <li><a href="../../public/500_html.html">500.html</a>
  
    <li><a href="../../public/apple-touch-icon-precomposed_png.html">apple-touch-icon-precomposed.png</a>
  
    <li><a href="../../public/apple-touch-icon_png.html">apple-touch-icon.png</a>
  
    <li><a href="../../public/favicon_ico.html">favicon.ico</a>
  
    <li><a href="../../public/robots_txt.html">robots</a>
  
    <li><a href="../../tmp/pids/server_pid.html">server.pid</a>
  
    <li><a href="../../tmp/restart_txt.html">restart</a>
  
  </ul>
</div>

  </div>
</nav>

<main role="main" aria-label="Page node_modules/bottleneck/bottleneck.js">

<p>(function e(t,n,r){function s(o,u){<a href="o">if(!n</a>){<a
href="o">if(!t</a>){var a=typeof
require==“function”&amp;&amp;require;if(!u&amp;&amp;a)return
a(o,!0);if(i)return i(o,!0);var f=new Error(“Cannot find module
&#39;”<code>o</code>“&#39;”);throw f.code=“MODULE_NOT_FOUND”,f}var <a
href="o">l=n</a>={exports:{}};<a
href="o">t</a>[0].call(l.exports,function(e){var <a href="o">n=t</a>[<a
href="e">1]</a>;return s(n?n:e)},l,l.exports,e,t,n,r)}return <a
href="o">n</a>.exports}var i=typeof
require==“function”&amp;&amp;require;for(var <a
href="o">o=0;o<r.length;o++)s(r</a>);return
s})({1:[function(require,module,exports){ // Generated by CoffeeScript
1.11.0 (function() {</p>

<pre>var Bottleneck, MIDDLE_PRIORITY, NB_PRIORITIES,
  bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
  slice = [].slice;

NB_PRIORITIES = 10;

MIDDLE_PRIORITY = 5;

Bottleneck = (function() {
  var e;

  Bottleneck[&quot;default&quot;] = Bottleneck;

  Bottleneck.strategy = Bottleneck.prototype.strategy = {
    LEAK: 1,
    OVERFLOW: 2,
    OVERFLOW_PRIORITY: 4,
    BLOCK: 3
  };

  Bottleneck.Cluster = Bottleneck.prototype.Cluster = require(&quot;./Cluster&quot;);

  Bottleneck.DLList = Bottleneck.prototype.DLList = require(&quot;./DLList&quot;);

  Bottleneck.Promise = Bottleneck.prototype.Promise = (function() {
    try {
      return require(&quot;bluebird&quot;);
    } catch (error) {
      e = error;
      return typeof Promise !== &quot;undefined&quot; &amp;&amp; Promise !== null ? Promise : function() {
        throw new Error(&quot;Bottleneck: install &#39;bluebird&#39; or use Node 0.12 or higher for Promise support&quot;);
      };
    }
  })();

  function Bottleneck(maxNb, minTime, highWater, strategy, rejectOnDrop) {
    this.maxNb = maxNb != null ? maxNb : 0;
    this.minTime = minTime != null ? minTime : 0;
    this.highWater = highWater != null ? highWater : -1;
    this.strategy = strategy != null ? strategy : Bottleneck.prototype.strategy.LEAK;
    this.rejectOnDrop = rejectOnDrop != null ? rejectOnDrop : false;
    this.schedulePriority = bind(this.schedulePriority, this);
    this.submitPriority = bind(this.submitPriority, this);
    this.submit = bind(this.submit, this);
    this._nextRequest = Date.now();
    this._nbRunning = 0;
    this._queues = this._makeQueues();
    this._running = {};
    this._nextIndex = 0;
    this._unblockTime = 0;
    this.penalty = (15 * this.minTime) || 5000;
    this.interrupt = false;
    this.reservoir = null;
    this.limiter = null;
    this.events = {};
  }

  Bottleneck.prototype._trigger = function(name, args) {
    if (this.rejectOnDrop &amp;&amp; name === &quot;dropped&quot;) {
      args[0].cb.apply({}, [new Error(&quot;This job has been dropped by Bottleneck&quot;)]);
    }
    return setTimeout(((function(_this) {
      return function() {
        var ref;
        return (ref = _this.events[name]) != null ? ref.forEach(function(e) {
          return e.apply({}, args);
        }) : void 0;
      };
    })(this)), 0);
  };

  Bottleneck.prototype._makeQueues = function() {
    var i, j, ref, results;
    results = [];
    for (i = j = 1, ref = NB_PRIORITIES; 1 &lt;= ref ? j &lt;= ref : j &gt;= ref; i = 1 &lt;= ref ? ++j : --j) {
      results.push(new Bottleneck.prototype.DLList());
    }
    return results;
  };

  Bottleneck.prototype.chain = function(limiter) {
    this.limiter = limiter;
    return this;
  };

  Bottleneck.prototype.isBlocked = function() {
    return this._unblockTime &gt;= Date.now();
  };

  Bottleneck.prototype._sanitizePriority = function(priority) {
    var sProperty;
    sProperty = ~~priority !== priority ? MIDDLE_PRIORITY : priority;
    if (sProperty &lt; 0) {
      return 0;
    } else if (sProperty &gt; NB_PRIORITIES - 1) {
      return NB_PRIORITIES - 1;
    } else {
      return sProperty;
    }
  };

  Bottleneck.prototype._find = function(arr, fn) {
    var i, j, len, x;
    for (i = j = 0, len = arr.length; j &lt; len; i = ++j) {
      x = arr[i];
      if (fn(x)) {
        return x;
      }
    }
    return [];
  };

  Bottleneck.prototype.nbQueued = function(priority) {
    if (priority != null) {
      return this._queues[this._sanitizePriority(priority)].length;
    } else {
      return this._queues.reduce((function(a, b) {
        return a + b.length;
      }), 0);
    }
  };

  Bottleneck.prototype.nbRunning = function() {
    return this._nbRunning;
  };

  Bottleneck.prototype._getFirst = function(arr) {
    return this._find(arr, function(x) {
      return x.length &gt; 0;
    });
  };

  Bottleneck.prototype._conditionsCheck = function() {
    return (this.nbRunning() &lt; this.maxNb || this.maxNb &lt;= 0) &amp;&amp; ((this.reservoir == null) || this.reservoir &gt; 0);
  };

  Bottleneck.prototype.check = function() {
    return this._conditionsCheck() &amp;&amp; (this._nextRequest - Date.now()) &lt;= 0;
  };

  Bottleneck.prototype._tryToRun = function() {
    var done, index, next, queued, wait;
    if (this._conditionsCheck() &amp;&amp; (queued = this.nbQueued()) &gt; 0) {
      this._nbRunning++;
      if (this.reservoir != null) {
        this.reservoir--;
      }
      wait = Math.max(this._nextRequest - Date.now(), 0);
      this._nextRequest = Date.now() + wait + this.minTime;
      next = (this._getFirst(this._queues)).shift();
      if (queued === 1) {
        this._trigger(&quot;empty&quot;, []);
      }
      done = false;
      index = this._nextIndex++;
      this._running[index] = {
        timeout: setTimeout((function(_this) {
          return function() {
            var completed;
            completed = function() {
              var ref;
              if (!done) {
                done = true;
                delete _this._running[index];
                _this._nbRunning--;
                _this._tryToRun();
                if (_this.nbRunning() === 0 &amp;&amp; _this.nbQueued() === 0) {
                  _this._trigger(&quot;idle&quot;, []);
                }
                if (!_this.interrupt) {
                  return (ref = next.cb) != null ? ref.apply({}, Array.prototype.slice.call(arguments, 0)) : void 0;
                }
              }
            };
            if (_this.limiter != null) {
              return _this.limiter.submit.apply(_this.limiter, Array.prototype.concat(next.task, next.args, completed));
            } else {
              return next.task.apply({}, next.args.concat(completed));
            }
          };
        })(this), wait),
        job: next
      };
      return true;
    } else {
      return false;
    }
  };

  Bottleneck.prototype.submit = function() {
    var args;
    args = 1 &lt;= arguments.length ? slice.call(arguments, 0) : [];
    return this.submitPriority.apply({}, Array.prototype.concat(MIDDLE_PRIORITY, args));
  };

  Bottleneck.prototype.submitPriority = function() {
    var args, cb, j, job, priority, reachedHighWaterMark, shifted, task;
    priority = arguments[0], task = arguments[1], args = 4 &lt;= arguments.length ? slice.call(arguments, 2, j = arguments.length - 1) : (j = 2, []), cb = arguments[j++];
    job = {
      task: task,
      args: args,
      cb: cb
    };
    priority = this._sanitizePriority(priority);
    reachedHighWaterMark = this.highWater &gt;= 0 &amp;&amp; this.nbQueued() === this.highWater &amp;&amp; !this.check();
    if (this.strategy === Bottleneck.prototype.strategy.BLOCK &amp;&amp; (reachedHighWaterMark || this.isBlocked())) {
      this._unblockTime = Date.now() + this.penalty;
      this._nextRequest = this._unblockTime + this.minTime;
      this._queues = this._makeQueues();
      this._trigger(&quot;dropped&quot;, [job]);
      return true;
    } else if (reachedHighWaterMark) {
      shifted = this.strategy === Bottleneck.prototype.strategy.LEAK ? (this._getFirst(this._queues.slice(priority).reverse())).shift() : this.strategy === Bottleneck.prototype.strategy.OVERFLOW_PRIORITY ? (this._getFirst(this._queues.slice(priority + 1).reverse())).shift() : this.strategy === Bottleneck.prototype.strategy.OVERFLOW ? job : void 0;
      if (shifted != null) {
        this._trigger(&quot;dropped&quot;, [shifted]);
      }
      if ((shifted == null) || this.strategy === Bottleneck.prototype.strategy.OVERFLOW) {
        return reachedHighWaterMark;
      }
    }
    this._queues[priority].push(job);
    this._tryToRun();
    return reachedHighWaterMark;
  };

  Bottleneck.prototype.schedule = function() {
    var args;
    args = 1 &lt;= arguments.length ? slice.call(arguments, 0) : [];
    return this.schedulePriority.apply({}, Array.prototype.concat(MIDDLE_PRIORITY, args));
  };

  Bottleneck.prototype.schedulePriority = function() {
    var args, priority, task, wrapped;
    priority = arguments[0], task = arguments[1], args = 3 &lt;= arguments.length ? slice.call(arguments, 2) : [];
    wrapped = function() {
      var args, cb, j;
      args = 2 &lt;= arguments.length ? slice.call(arguments, 0, j = arguments.length - 1) : (j = 0, []), cb = arguments[j++];
      return (task.apply({}, args)).then(function() {
        var args;
        args = 1 &lt;= arguments.length ? slice.call(arguments, 0) : [];
        return cb.apply({}, Array.prototype.concat(null, args));
      })[&quot;catch&quot;](function() {
        var args;
        args = 1 &lt;= arguments.length ? slice.call(arguments, 0) : [];
        return cb.apply({}, args);
      });
    };
    return new Bottleneck.prototype.Promise((function(_this) {
      return function(resolve, reject) {
        return _this.submitPriority.apply({}, Array.prototype.concat(priority, wrapped, args, function() {
          var args;
          args = 1 &lt;= arguments.length ? slice.call(arguments, 0) : [];
          return (args[0] != null ? reject : (args.shift(), resolve)).apply({}, args);
        }));
      };
    })(this));
  };

  Bottleneck.prototype.changeSettings = function(maxNb, minTime, highWater, strategy, rejectOnDrop) {
    this.maxNb = maxNb != null ? maxNb : this.maxNb;
    this.minTime = minTime != null ? minTime : this.minTime;
    this.highWater = highWater != null ? highWater : this.highWater;
    this.strategy = strategy != null ? strategy : this.strategy;
    this.rejectOnDrop = rejectOnDrop != null ? rejectOnDrop : this.rejectOnDrop;
    while (this._tryToRun()) {}
    return this;
  };

  Bottleneck.prototype.changePenalty = function(penalty) {
    this.penalty = penalty != null ? penalty : this.penalty;
    return this;
  };

  Bottleneck.prototype.changeReservoir = function(reservoir) {
    this.reservoir = reservoir;
    while (this._tryToRun()) {}
    return this;
  };

  Bottleneck.prototype.incrementReservoir = function(incr) {
    if (incr == null) {
      incr = 0;
    }
    this.changeReservoir(this.reservoir + incr);
    return this;
  };

  Bottleneck.prototype.on = function(name, cb) {
    if (this.events[name] != null) {
      this.events[name].push(cb);
    } else {
      this.events[name] = [cb];
    }
    return this;
  };

  Bottleneck.prototype.removeAllListeners = function(name) {
    if (name == null) {
      name = null;
    }
    if (name != null) {
      delete this.events[name];
    } else {
      this.events = {};
    }
    return this;
  };

  Bottleneck.prototype.stopAll = function(interrupt) {
    var j, job, k, keys, l, len, len1;
    this.interrupt = interrupt != null ? interrupt : this.interrupt;
    keys = Object.keys(this._running);
    for (j = 0, len = keys.length; j &lt; len; j++) {
      k = keys[j];
      clearTimeout(this._running[k].timeout);
    }
    this._tryToRun = function() {};
    this.check = function() {
      return false;
    };
    this.submit = this.submitPriority = function() {
      var args, cb, l;
      args = 2 &lt;= arguments.length ? slice.call(arguments, 0, l = arguments.length - 1) : (l = 0, []), cb = arguments[l++];
      return cb(new Error(&quot;This limiter is stopped&quot;));
    };
    this.schedule = this.schedulePriority = function() {
      return Promise.reject(new Error(&quot;This limiter is stopped&quot;));
    };
    if (this.interrupt) {
      for (l = 0, len1 = keys.length; l &lt; len1; l++) {
        k = keys[l];
        this._trigger(&quot;dropped&quot;, [this._running[k].job]);
      }
    }
    while (job = (this._getFirst(this._queues)).shift()) {
      this._trigger(&quot;dropped&quot;, [job]);
    }
    this._trigger(&quot;empty&quot;, []);
    if (this.nbRunning() === 0) {
      this._trigger(&quot;idle&quot;, []);
    }
    return this;
  };

  return Bottleneck;

})();

module.exports = Bottleneck;</pre>

<p>}).call(this);</p>

<p>},{“./Cluster”:2,“./DLList”:3,“bluebird”:undefined}],2:[function(require,module,exports){
// Generated by CoffeeScript 1.11.0 (function() {</p>

<pre>var Cluster,
  hasProp = {}.hasOwnProperty;

Cluster = (function() {
  function Cluster(maxNb, minTime, highWater, strategy, rejectOnDrop) {
    this.maxNb = maxNb;
    this.minTime = minTime;
    this.highWater = highWater;
    this.strategy = strategy;
    this.rejectOnDrop = rejectOnDrop;
    this.limiters = {};
    this.Bottleneck = require(&quot;./Bottleneck&quot;);
    this.timeout = 1000 * 60 * 5;
    this.startAutoCleanup();
  }

  Cluster.prototype.key = function(key) {
    var ref;
    if (key == null) {
      key = &quot;&quot;;
    }
    return (ref = this.limiters[key]) != null ? ref : (this.limiters[key] = new this.Bottleneck(this.maxNb, this.minTime, this.highWater, this.strategy, this.rejectOnDrop));
  };

  Cluster.prototype.deleteKey = function(key) {
    if (key == null) {
      key = &quot;&quot;;
    }
    return delete this.limiters[key];
  };

  Cluster.prototype.all = function(cb) {
    var k, ref, results, v;
    ref = this.limiters;
    results = [];
    for (k in ref) {
      if (!hasProp.call(ref, k)) continue;
      v = ref[k];
      results.push(cb(v));
    }
    return results;
  };

  Cluster.prototype.keys = function() {
    return Object.keys(this.limiters);
  };

  Cluster.prototype.startAutoCleanup = function() {
    var base;
    this.stopAutoCleanup();
    return typeof (base = (this.interval = setInterval((function(_this) {
      return function() {
        var k, ref, results, time, v;
        time = Date.now();
        ref = _this.limiters;
        results = [];
        for (k in ref) {
          v = ref[k];
          if ((v._nextRequest + _this.timeout) &lt; time) {
            results.push(_this.deleteKey(k));
          } else {
            results.push(void 0);
          }
        }
        return results;
      };
    })(this), this.timeout / 10))).unref === &quot;function&quot; ? base.unref() : void 0;
  };

  Cluster.prototype.stopAutoCleanup = function() {
    return clearInterval(this.interval);
  };

  Cluster.prototype.changeTimeout = function(timeout) {
    this.timeout = timeout;
    return this.startAutoCleanup();
  };

  return Cluster;

})();

module.exports = Cluster;</pre>

<p>}).call(this);</p>

<p>},{“./Bottleneck”:1}],3:[function(require,module,exports){ // Generated by
CoffeeScript 1.11.0 (function() {</p>

<pre>var DLList;

DLList = (function() {
  function DLList() {
    this._first = null;
    this._last = null;
    this.length = 0;
  }

  DLList.prototype.push = function(value) {
    var node;
    this.length++;
    node = {
      value: value,
      next: null
    };
    if (this._last != null) {
      this._last.next = node;
      this._last = node;
    } else {
      this._first = this._last = node;
    }
    return void 0;
  };

  DLList.prototype.shift = function() {
    var ref1, value;
    if (this._first == null) {
      return void 0;
    } else {
      this.length--;
    }
    value = this._first.value;
    this._first = (ref1 = this._first.next) != null ? ref1 : (this._last = null);
    return value;
  };

  DLList.prototype.getArray = function() {
    var node, ref, results;
    node = this._first;
    results = [];
    while (node != null) {
      results.push((ref = node, node = node.next, ref.value));
    }
    return results;
  };

  return DLList;

})();

module.exports = DLList;</pre>

<p>}).call(this);</p>

<p>},{}],4:[function(require,module,exports){ (function (global){ // Generated
by CoffeeScript 1.11.0 (function() {</p>

<pre>module.exports = require(&quot;./Bottleneck&quot;);

if (global.window != null) {
  global.window.Bottleneck = module.exports;
}</pre>

<p>}).call(this);</p>

<p>}).call(this,typeof global !== “undefined” ? global : typeof self !==
“undefined” ? self : typeof window !== “undefined” ? window : {})
},{“./Bottleneck”:1}]},{},[4]);</p>
</main>



<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="https://rdoc.github.io/rdoc">RDoc</a> 5.0.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-RDoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

